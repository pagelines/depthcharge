function churnSmartPosition(t,e){var i=[];return i.top=e.h/2-t.h/2+t.voffset,i.left=e.w/2-t.w/2+t.hoffset,i}function churnPaths(t,e){var i=[],r=[];return r.w=0,r.m=t.vratio+1,i[0]=[],t.slingshot?(r.th=Math.round(e.h/2+e.ot-win.h/2),i[0].h=t.smartposition.top-r.th*r.m,i[0].w=t.smartposition.left,i[r.th]=[],i[r.th].h=t.smartposition.top,i[r.th].w=t.smartposition.left,t.vratio>0?(r.bh=e.ob+e.h-t.smartposition.top-t.h,r.rbh=Math.round(r.bh/r.m),i[r.th+r.rbh]=[],i[r.th+r.rbh].h=i[r.th].h+r.bh,i[r.th+r.rbh].w=t.smartposition.left):(r.buff=1e5,i[r.th+r.buff]=[],i[r.th+r.buff].h=i[r.th].h+r.buff*r.m,i[r.th+r.buff].w=t.smartposition.left)):(i[0].h=t.smartposition.top,i[0].w=t.smartposition.left,t.vratio>1?(r.bh=e.ob+e.h-t.smartposition.top-t.h,r.rbh=Math.round(r.bh/r.m),i[r.rbh]=[],i[r.rbh].h=r.bh,i[r.rbh].w=t.smartposition.left):(r.buff=1e5,i[r.buff]=[],i[r.buff].h=r.buff*r.m,i[r.buff].w=t.smartposition.left)),i}function churnTargetDimensions(t){var e=0,i=[];return i.h=t.ot>=win.h?win.h+t.h-e:t.h+t.ot-e,i.w=t.w,i}function churnSize(t,e){var i,r,o,n,a,h,s,f=Math.abs(t.vratio);if(t.vratio>=0?(a=e.target.h+e.target.h*f,e.ot+e.config.ploffset>=win.h&&(a=a),a<e.h*f&&(a=e.h*f)):(a=e.target.h*f,e.ot>=win.h&&(a=2*e.h*f,a<e.h+e.h*f&&(a=(e.ot+e.h)*f))),i=t.w/e.target.w,r=i-1,o=t.h/a,n=o-1,1>o||1>i){if(r>=n)return h=1/o,s=h*t.h,{w:"auto",h:Math.round(s),oHeight:a};if(n>r)return h=1/i,s=h*t.w,{w:Math.round(s),h:"auto",oHeight:a}}if(o>=1&&i>=1){if(r>=n)return h=1/o,s=h*t.h,{w:"auto",h:Math.round(s),oHeight:a};if(n>r)return h=1/i,s=h*t.w,{w:Math.round(s),h:"auto",oHeight:a}}return 1==o&&1==i?null:void 0}function churnAttributes(t){var e,i;if(t.backdrops){for(e=0;e<t.backdrops.length;e++)i=t.backdrops[e],t.backdrops[e].smartsize=churnSize(i,t),t.backdrops[e].waypoints=churnWaypoints(i,t);for(e=0;e<t.config.bg_smartsize.length;e++)t.backdrops[e].smartsize.status=t.config.bg_smartsize[e]}if(t.sprites)for(e=0;e<t.sprites.length;e++)i=t.sprites[e],i.smartposition=churnSmartPosition(i,t),i.path=churnPaths(i,t)}function getDataAttributes(t){var e={},i=/^data\-(.+)$/;return jQuery.each(t.get(0).attributes,function(t,r){if(i.test(r.nodeName)){var o=r.nodeName.match(i)[1];e[o]=r.nodeValue}}),e}function pixelize(t){return isNaN(t)||(t+="px"),t}function applyAttributes(t){var e,i,r,o,n,a=[];existingData=getDataAttributes(t.container);for(o in existingData)existingData.hasOwnProperty(o)&&t.container.removeAttr("data-"+o);if(t.backdrops){for(n=[],e=0;e<t.backdrops.length;e++){for(r=t.backdrops[e],i=0;i<r.waypoints.length;i++)a[r.waypoints[i].index]||(a[r.waypoints[i].index]=[]),a[r.waypoints[i].index].push([pixelize(r.waypoints[i].w),pixelize(r.waypoints[i].h)].join(" "));n.push(1==r.smartsize.status?pixelize(r.smartsize.w)+" "+pixelize(r.smartsize.h):"auto auto")}for(o in a)a.hasOwnProperty(o)&&t.container.attr("data-"+o,"background-position: "+a[o].join(",")+";");t.container.css("background-size",n)}if(t.sprites)for(e=0;e<t.sprites.length;e++){r=t.sprites[e],existingData=getDataAttributes(r.element);for(o in existingData)existingData.hasOwnProperty(o)&&r.element.removeAttr("data-"+o);for(o in r.path)r.path.hasOwnProperty(o)&&r.element.attr("data-"+o,"top: "+r.path[o].h+"px; left: "+r.path[o].w+"px;")}}function churnWaypoints(t,e){var i,r=[];return r[0]=[],r[1]=[],e.ot+e.config.ploffset>win.h?(r[0].index="bottom-top",r[1].index=-e.target.h+"-bottom-top"):(r[0].index=0,r[1].index=Math.round(e.ot+e.h)),i=0,"1"==t.centered&&(i="50%"),t.vratio<=0?(r[0].w=i,r[0].h=0,r[1].w=i,r[1].h=-t.smartsize.oHeight+e.h,e.ot+e.config.ploffset>=win.h&&(r[0].h=r[0].h,r[1].h=r[1].h)):(r[0].w=i,r[1].w=i,r[0].h=-(t.smartsize.oHeight-e.h),r[1].h=-(0-e.h),e.ot+e.config.ploffset>=win.h&&(r[0].h=r[0].h-e.h,r[1].h=r[1].h-e.h)),r}function engageDepthCharge(){win=[],doc=[],win.w=jQuery(window).width(),win.h=jQuery(window).height(),doc.w=jQuery(document).width(),doc.h=jQuery("html").height(),jQuery.fn.hasAttrMatching=function(t){var e,i;return t?("string"==typeof t?e=new RegExp(t):"object"==typeof t&&t.test&&(e=t),this.filter(function(){i=$(this).data();for(var t in i)if(i.hasOwnProperty(t))return e.test(t)})):this},jQuery(".depthChargeBlock").each(function(){new Block(jQuery(this))})}function prime_dc_interface(){function t(t,e){e?t.show():t.hide()}function e(t){console.log("cleaning interface"),selected=t.find(":selected").text(),"SlabText"==selected?(t.parent().find('label[for^="sprite_array_item"]').filter('label[for$="_heading"]').show(),t.parent().find('[id^="sprite_array_item"]').filter('[id$="_heading"]').show(),t.parent().find('label[for^="sprite_array_item"]').filter('label[for$="_font"]').show(),t.parent().find('[id^="sprite_array_item"]').filter('[id$="_font"]').show(),t.parent().find('[id^="sprite_array_item"]').filter('[id$="_font"]').next().show(),t.parent().find('[id^="sprite_array_item"]').filter('[id$="_font"]').next().next().show(),t.parent().find('label[for^="sprite_array_item"]').filter('label[for$="_textwidth"]').show(),t.parent().find('[id^="sprite_array_item"]').filter('[id$="_textwidth"]').show(),t.parent().find('label[for^="sprite_array_item"]').filter('label[for$="_color"]').show(),t.parent().find('label[for^="sprite_array_item"]').filter('label[for$="_color"]').next().show(),t.parent().find(".img-upload-box").hide(),t.parent().find('label[for^="sprite_array_item"]').filter('label[for$="_code"]').hide(),t.parent().find('[id^="sprite_array_item"]').filter('[id$="_code"]').hide()):"Image"==selected?(t.parent().find(".img-upload-box").show(),t.parent().find('label[for^="sprite_array_item"]').filter('label[for$="_code"]').hide(),t.parent().find('label[for^="sprite_array_item"]').filter('label[for$="_heading"]').hide(),t.parent().find('[id^="sprite_array_item"]').filter('[id$="_heading"]').hide(),t.parent().find('label[for^="sprite_array_item"]').filter('label[for$="_font"]').hide(),t.parent().find('[id^="sprite_array_item"]').filter('[id$="_font"]').hide(),t.parent().find('[id^="sprite_array_item"]').filter('[id$="_font"]').next().hide(),t.parent().find('[id^="sprite_array_item"]').filter('[id$="_font"]').next().next().hide(),t.parent().find('label[for^="sprite_array_item"]').filter('label[for$="_textwidth"]').hide(),t.parent().find('[id^="sprite_array_item"]').filter('[id$="_textwidth"]').hide(),t.parent().find('label[for^="sprite_array_item"]').filter('label[for$="_color"]').hide(),t.parent().find('label[for^="sprite_array_item"]').filter('label[for$="_color"]').next().hide(),t.parent().find('[id^="sprite_array_item"]').filter('[id$="_code"]').hide()):"Code"==selected&&(t.parent().find('label[for^="sprite_array_item"]').filter('label[for$="_code"]').show(),t.parent().find('[id^="sprite_array_item"]').filter('[id$="_code"]').show(),t.parent().find(".img-upload-box").hide(),t.parent().find('label[for^="sprite_array_item"]').filter('label[for$="_heading"]').hide(),t.parent().find('[id^="sprite_array_item"]').filter('[id$="_heading"]').hide(),t.parent().find('label[for^="sprite_array_item"]').filter('label[for$="_font"]').hide(),t.parent().find('[id^="sprite_array_item"]').filter('[id$="_font"]').hide(),t.parent().find('[id^="sprite_array_item"]').filter('[id$="_font"]').next().hide(),t.parent().find('[id^="sprite_array_item"]').filter('[id$="_font"]').next().next().hide(),t.parent().find('label[for^="sprite_array_item"]').filter('label[for$="_textwidth"]').hide(),t.parent().find('[id^="sprite_array_item"]').filter('[id$="_textwidth"]').hide(),t.parent().find('label[for^="sprite_array_item"]').filter('label[for$="_color"]').hide(),t.parent().find('label[for^="sprite_array_item"]').filter('label[for$="_color"]').next().hide())}console.log("prime_dc_interface"),jQuery('[id^="sprite_array_item"]').filter('[id$="_type"]').each(function(){e(jQuery(this))}),console.log(jQuery(".checkgroup-sprites").length),jQuery(".checkgroup-sprites > .checkbox").each(function(){var e=jQuery(this);"none"!=e.css("display")&&(outcome=jQuery(this).find(".checkbox-toggle").val(),outcome=1==outcome?!0:!1,console.log("604: ".outcome)),console.log("609"),t(e.parents().filter(".form-depthcharge-local").find("#sprite_array"),outcome)}),jQuery(".checkgroup-sprites > .checkbox").change(function(){var e=jQuery(this),i=jQuery(this).find(".checkbox-toggle").val();i=1==i?!0:!1,console.log("624: ".outcome),t(e.parents().filter(".form-depthcharge-local").find("#sprite_array"),i)}),jQuery('[id^="sprite_array_item"]').filter('[id$="_type"]').change(function(){console.log("####"),e(jQuery(this))})}var win,doc,Block=function(t){var e,i,r;if(this.container=t,this.config=etc_dc_config[t.attr("id")],(!/Android|iPhone|iPad|iPod|BlackBerry|Windows Phone/i.test(navigator.userAgent||navigator.vendor||window.opera)||this.config.mobile)&&(dc_charter=!0),this.plid=t.attr("id"),this.config.ploffset=jQuery("#navbar").outerHeight()+jQuery("#wpadminbar").outerHeight(),1==this.config.pl&&(this.config.ploffset=this.config.ploffset+57),"1"==this.config.fullheight&&t.css("height",jQuery(window).height()-this.config.ploffset),this.h=t.outerHeight(),this.w=t.outerWidth(),this.ot=Math.round(t.offset().top),this.ob=Math.round(jQuery("body").height()-this.ot-this.h),this.target=churnTargetDimensions(this),i=t.css("background-image").replace(/url\((['"])?(.*?)\1\)/gi,"$2").split(","),i.length>0)for(this.backdrops=[],e=0;e<i.length;e++)this.backdrops[e]=new Backdrop(i[e]);if(this.config.bg_ratio_v)for(e=0;e<this.config.bg_ratio_v.length;e++)this.backdrops[e].vratio=+this.config.bg_ratio_v[e];if(this.config.bg_ratio_h)for(e=0;e<this.config.bg_ratio_h.length;e++)this.backdrops[e].hratio=+this.config.bg_ratio_h[e];if(this.config.bg_centered)for(e=0;e<this.config.bg_centered.length;e++)this.backdrops[e].centered=+this.config.bg_centered[e];for(this.sprites=[],e=0;e<jQuery("#"+this.plid+" .depthChargeSprite").size();e++)this.sprites.push(new Sprite(jQuery("#"+this.plid+" .depthChargeSprite").eq(e))),r=this.sprites[e],r.vratio=+this.config.sp_ratio_v[e],r.voffset=+this.config.sp_offset_v[e],r.hoffset=+this.config.sp_offset_h[e],r.slingshot=this.config.sp_slingshot[e];churnAttributes(this),applyAttributes(this)},Backdrop=function(t){var e=new Image;e.src=t,this.h=e.height,this.w=e.width},Pane=function(t){this.container=t},Sprite=function(t){this.element=t,this.h=t.outerHeight(),this.w=t.outerWidth()};+function(t){t(document).ready(function(){window.onresize=function(){engageDepthCharge(),skrollr&&skrollr.get().refresh()},engageDepthCharge(),prime_dc_interface(),dc_charter&&skrollr.init({forceHeight:!1,smoothScroll:!0,smoothScrollingDuration:200}),jQuery(".depthChargeSprite .slabtext")[0]&&jQuery(".depthChargeSprite h1").slabText({viewportBreakpoint:380})})}(window.jQuery);